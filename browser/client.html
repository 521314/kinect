<!doctype html>
<html>
  <head>
    <script type="text/javascript">
      function run() {
        var image = document.getElementById('image');
        var frame = document.getElementById('frame');
        var source = new EventSource('/images');

        source.addEventListener('message', function(event) {
          image.src = event.data;
          frame.innerText = event.lastEventId;
        });
      }

      document.addEventListener('DOMContentLoaded', function() {
        setTimeout(run, 1000);
      });
    </script>
    <style type="text/css">
      img { border: 1px solid #ccc; }
      #frame { font-family: sans-serif; font-size: 13px; color: #888 }
    </style>
  </head>
  <body>
    <img id="image">
    <div id="frame"></div>
  </body>
</html>
